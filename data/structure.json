{
  "project_manifest": {
    "name": "Universal Office (Prayer App New)",
    "version": "2.0.0",
    "description": "A comprehensive digital Daily Office and Psalter designed for Anglicans and those in communion with them. It incorporates elements from Anglican, Catholic, Eastern Orthodox, Oriental Orthodox, and Church of the East monastic and parish prayer services.",
    "theological_vision": "As part of 'the one, holy, catholic, and apostolic Church,' the app aims to help users become more like Jesus through sacraments and prayer, drawing from the Holy Fathers.",
    "current_phase": "Phase 5: Production-Ready with Full Feature Set",
    "last_major_update": "2026-02-14"
  },
  "operational_status": "FULLY OPERATIONAL - The application has undergone comprehensive refactoring and is production-ready. All critical bugs have been resolved, memory management is optimized, and the user experience has been significantly enhanced.",
  "goals": [
    "Offer customizable prayer experiences drawing from multiple Christian traditions to deepen users' spiritual lives.",
    "Facilitate immersion in worship, bringing 'heaven to earth' through visual, auditory, and sensory elements.",
    "Include a saints section with a curated kalendar based on Lesser Feasts and Fasts and the BCP, reviewed for marks of holiness and intercession.",
    "Ensure the app is beautiful and engaging, changing with liturgical seasons to enhance the prayer experience.",
    "Complete the 'Eight Books' of the Ethiopian New Testament church order.",
    "Standardize all unique canonical IDs (e.g., 1MEQ, JUB, ASC_ISA, FETH_NAG, 3CO, 2BA, LAO) for global searchability."
  ],
  "immersive_features": {
    "visual": "Icons of saints, background colors, and themes that change with liturgical seasons based on seasonal JSON files and liturgicalColor field.",
    "auditory": "Light background music or sounds to evoke a sacred atmosphere (pending implementation).",
    "sensory": "Design elements that evoke the atmosphere of traditional worship (e.g., imagery of incense).",
    "ui": "Immersive interface for web and mobile to create a 'heavenly worship' experience."
  },
  "technical_architecture": {
    "frontend": "Vanilla JavaScript with CSS custom properties for theming",
    "data_format": "Modular JSON structures for high-performance client-side rendering",
    "state_management": "In-memory session state with localStorage persistence for user preferences",
    "performance": "LRU cache for Bible text (max 20 books), lazy loading for seasonal data",
    "entry_point": "index.html with consolidated logic"
  },
  "content_status": {
    "psalter": {
      "canonical_psalms": "1-150 (Completed)",
      "historical_psalms": "151-155 (Completed: Syriac Peshitta lectionary alignment verified)",
      "total_entries": 155,
      "source_text": "NRSV / Traditional liturgical translations",
      "status": "Fully verified and integrated into data/bible/OT/psalms.json"
    },
    "ethiopic_pillar": {
      "historical_legal": "Completed: Didaskalia, Fetha Nagast (Full), Nicaea, Josippon (Full)",
      "prophetic_wisdom": "Completed: 1 Enoch, Jubilees, Ascension of Isaiah, Rest of Baruch, Rest of Jeremiah, 1-3 Meqa'abyan",
      "patristic_pillar": "Completed: 1-8 Clement (Ethiopic), Shepherd of Hermas",
      "new_testament_eight_books": "Completed: Sirate Tsion, Tizaz, Gitsiw, Abtilis, I-IV Qalëmentos (Visionary, Rolls, and Statute Recensions)",
      "marian_narrative": "Completed: Tä'amrä Maryam (Miracles of Mary) - 100 Miracles (Volumes I & II Combined)",
      "hymnody": "Completed: Malke'a Mariam, Malke'a Iyasus, Malke'a Guba'e (Full Salutation Cycle Finished)"
    },
    "global_expansion": {
      "syriac_tradition": "Completed: 2 Baruch, 5 Maccabees (Syriac), Letter of Baruch, Odes of Solomon, Psalms 152-155 (Peshitta), History of Zosimus",
      "armenian_tradition": "Completed: 3 Corinthians, Prayer of Apollonius, Armenian Canticles",
      "eastern_orthodox": "Completed: Nine Biblical Odes (Septuagint Basis)",
      "coptic_tradition": "Completed: Four Hoos (Coptic Odes)",
      "western_apocrypha": "Completed: Epistle to the Laodiceans"
    },
    "liturgy": {
      "morning_prayer": "Fully operational with customizable settings (Rite I/II, Priest/Lay, optional prayers)",
      "evening_prayer": "Fully operational with Phos Hilaron and Magnificat",
      "compline": "Fully operational with Nunc Dimittis",
      "noonday_prayer": "Fully operational",
      "customization": "Gospel placement (Morning/Evening/Both), 30-day Psalter option, Great Litany, Suffrages, Creed selection"
    },
    "collects_and_special": {
      "daily_collects": "Completed - collect IDs standardized across seasonal files and linked to components.json",
      "seasonal_antiphons": "Implemented via antiphon field in seasonal JSONs",
      "canticles": "Fully integrated: Magnificat, Nunc Dimittis, Te Deum, Benedictus, Phos Hilaron"
    },
    "saints_kalendar": {
      "status": "Complete for January through December with dynamic monthly loading",
      "implementation": "Automatically loads data/saints/saints-<month>.json based on current date"
    },
    "seasonal_propers": {
      "status": "Complete through liturgical year 2030",
      "coverage": "Advent, Christmas, Epiphany, Lent, Easter, Ordinary Time (subdivided)",
      "lectionary": "1979 BCP Daily Office Lectionary"
    }
  },
  "files_structure": {
    "root": [
      "index.html",
      "package.json"
    ],
    "data_root": [
      "data/README.md",
      "data/components.json",
      "data/rubrics.json",
      "data/structure.json"
    ],
    "bible_library": {
      "NT": [
        "data/bible/NT/1corinthians.json",
        "data/bible/NT/1john.json",
        "data/bible/NT/1peter.json",
        "data/bible/NT/1thessalonians.json",
        "data/bible/NT/1timothy.json",
        "data/bible/NT/2corinthians.json",
        "data/bible/NT/2john.json",
        "data/bible/NT/2peter.json",
        "data/bible/NT/2thessalonians.json",
        "data/bible/NT/2timothy.json",
        "data/bible/NT/3john.json",
        "data/bible/NT/acts.json",
        "data/bible/NT/colossians.json",
        "data/bible/NT/ephesians.json",
        "data/bible/NT/epistleofthelaodiceans.json",
        "data/bible/NT/galatians.json",
        "data/bible/NT/hebrews.json",
        "data/bible/NT/historyofzosimus.json",
        "data/bible/NT/james.json",
        "data/bible/NT/john.json",
        "data/bible/NT/jude.json",
        "data/bible/NT/luke.json",
        "data/bible/NT/mark.json",
        "data/bible/NT/matthew.json",
        "data/bible/NT/philemon.json",
        "data/bible/NT/philippians.json",
        "data/bible/NT/revelation.json",
        "data/bible/NT/romans.json",
        "data/bible/NT/titus.json"
      ],
      "OT": [
        "data/bible/OT/1chronicles.json",
        "data/bible/OT/1enoch.json",
        "data/bible/OT/1esdras.json",
        "data/bible/OT/1kings.json",
        "data/bible/OT/1maccabees.json",
        "data/bible/OT/1samuel.json",
        "data/bible/OT/2chronicles.json",
        "data/bible/OT/2esdras.json",
        "data/bible/OT/2kings.json",
        "data/bible/OT/2maccabees.json",
        "data/bible/OT/2samuel.json",
        "data/bible/OT/3maccabees.json",
        "data/bible/OT/4maccabees.json",
        "data/bible/OT/amos.json",
        "data/bible/OT/baruch.json",
        "data/bible/OT/daniel.json",
        "data/bible/OT/danielGK.json",
        "data/bible/OT/deuteronomy.json",
        "data/bible/OT/ecclesiastes.json",
        "data/bible/OT/esther.json",
        "data/bible/OT/estherGK.json",
        "data/bible/OT/exodus.json",
        "data/bible/OT/ezekiel.json",
        "data/bible/OT/ezra.json",
        "data/bible/OT/genesis.json",
        "data/bible/OT/habakkuk.json",
        "data/bible/OT/haggai.json",
        "data/bible/OT/hosea.json",
        "data/bible/OT/isaiah.json",
        "data/bible/OT/jeremiah.json",
        "data/bible/OT/job.json",
        "data/bible/OT/joel.json",
        "data/bible/OT/jonah.json",
        "data/bible/OT/joshua.json",
        "data/bible/OT/judges.json",
        "data/bible/OT/judith.json",
        "data/bible/OT/lamentations.json",
        "data/bible/OT/letterofjeremiah.json",
        "data/bible/OT/leviticus.json",
        "data/bible/OT/malachi.json",
        "data/bible/OT/micah.json",
        "data/bible/OT/nahum.json",
        "data/bible/OT/nehemiah.json",
        "data/bible/OT/numbers.json",
        "data/bible/OT/obadiah.json",
        "data/bible/OT/prayerofmanasseh.json",
        "data/bible/OT/proverbs.json",
        "data/bible/OT/psalms.json",
        "data/bible/OT/ruth.json",
        "data/bible/OT/sirach.json",
        "data/bible/OT/songofsolomon.json",
        "data/bible/OT/tobit.json",
        "data/bible/OT/wisdom.json",
        "data/bible/OT/zechariah.json",
        "data/bible/OT/zephaniah.json"
      ],
      "ET": [
        "data/bible/ET/1clementET.json",
        "data/bible/ET/1meqa'abyanET.json",
        "data/bible/ET/2clementET.json",
        "data/bible/ET/2meqa'abyanET.json",
        "data/bible/ET/3clementET.json",
        "data/bible/ET/3meqa'abyanET.json",
        "data/bible/ET/4clementET.json",
        "data/bible/ET/5ClementET.json",
        "data/bible/ET/7clementET.json",
        "data/bible/ET/8ClementET.json",
        "data/bible/ET/abtilisET.json",
        "data/bible/ET/admonitionsET.json",
        "data/bible/ET/ascensionofisaiahET.json",
        "data/bible/ET/bookofjubileesET.json",
        "data/bible/ET/clement6ET.json",
        "data/bible/ET/clementstatutesET.json",
        "data/bible/ET/ClementVisionaryET.json",
        "data/bible/ET/didaskaliaET.json",
        "data/bible/ET/fethanagastET.json",
        "data/bible/ET/guba'ekanaET.json",
        "data/bible/ET/hermastheshepherdET.json",
        "data/bible/ET/josipponET.json",
        "data/bible/ET/malke'aguba'eET.json",
        "data/bible/ET/malke'aiyasusET.json",
        "data/bible/ET/malke'avirginmaryET.json",
        "data/bible/ET/mazahetaET.json",
        "data/bible/ET/miraclesofmaryET.json",
        "data/bible/ET/restofbaruchET.json",
        "data/bible/ET/restofjeremiahET.json",
        "data/bible/ET/siratetsionET.json",
        "data/bible/ET/tizazET.json"
      ],
      "SY": [
        "data/bible/SY/2baruchSY.json",
        "data/bible/SY/5maccabeesSY.json",
        "data/bible/SY/letterofbaruchSY.json",
        "data/bible/SY/historyofzosimusSY.json"
      ],
      "AR": [
        "data/bible/AR/3corinthiansAR.json",
        "data/bible/AR/prayerofapolloniusAR.json"
      ],
      "ODES": [
        "data/bible/ODES/eoodes.json",
        "data/bible/ODES/copticodesCO.json",
        "data/bible/ODES/armeniancanticlesAR.json",
        "data/bible/ODES/ethiopianodes.json",
        "data/bible/ODES/odesofsolomonSY.json"
      ]
    },
    "saints_kalendar": [
      "data/saints/saints-january.json",
      "data/saints/saints-february.json",
      "data/saints/saints-march.json",
      "data/saints/saints-april.json",
      "data/saints/saints-may.json",
      "data/saints/saints-june.json",
      "data/saints/saints-july.json",
      "data/saints/saints-august.json",
      "data/saints/saints-september.json",
      "data/saints/saints-october.json",
      "data/saints/saints-november.json",
      "data/saints/saints-december.json"
    ],
    "seasonal_propers": [
      "data/season/advent.json",
      "data/season/christmas.json",
      "data/season/epiphany.json",
      "data/season/lent.json",
      "data/season/easter.json",
      "data/season/ordinary1.json",
      "data/season/ordinary2.json",
      "data/season/ordinary3.json"
    ]
  },
  "to_do_list": [
    "Step 1: Finalize BCP 1979 Invitatory logic (Venite/Jubilate) based on liturgical season. [HIGH PRIORITY]",
    "Step 2: Implement Phos Hilaron seasonal variations and Evening Prayer light-based logic. [HIGH PRIORITY]",
    "Step 3: Standardize BCP Year One/Year Two lectionary switching logic and lesson distribution options. [MEDIUM PRIORITY]",
    "Step 4: Integrate Global Canon additions (SY, AR, ODES, ET) into 'Broader Canon' mode selector with UI toggle. [MEDIUM PRIORITY]",
    "Step 5: Map Clementine visionary instructions to the liturgical year and create dynamic hooks for the Sa'atat hours. [MEDIUM PRIORITY]",
    "Step 6: Formatting: Enhance verse rendering with proper indentation for poetry (Psalms, canticles). [LOW PRIORITY]",
    "Step 7: Implement dynamic calculation for movable feasts using Computus algorithm (Easter through 2050). [FUTURE]",
    "Step 8: Migrate individual prayers from hardcoded JavaScript to components.json for better maintainability. [FUTURE]",
    "Step 9: Implement the Ethiopic Sa'atat (Book of Hours) night vigil logic with monastic hour structure. [FUTURE]",
    "Step 10: Transcribe the 14 Ethiopic Anaphoras (Qiddase) for integration with Eucharistic observances. [FUTURE]",
    "Step 11: Implement the Malke'a of the Archangels Michael and Gabriel. [FUTURE]",
    "Step 12: Add auditory features: ambient sacred music, chant options, or bell sounds for hour prayers. [FUTURE]",
    "Step 13: Develop mobile-optimized gestures for navigation (swipe between offices, dates). [FUTURE]",
    "Step 14: Create visual theming engine for liturgical colors with seasonal background images. [FUTURE]"
  ],
  "completed_fixes": [
    {
      "date": "2026-02-14",
      "version": "2.0.0",
      "category": "Major Refactor - Production Release",
      "fixes": [
        "Fix #1: Prayer Section Structure - Restructured Individual Prayers layout with proper container hierarchy and missing #prayer-selection element",
        "Fix #2: Date Picker Synchronization - Added updateDatePicker() function to sync picker with Prev/Next/Today navigation buttons",
        "Fix #3: Init Timing Optimization - Implemented lazy loading: Daily Office data only initializes when mode is selected, improving page load performance",
        "Fix #4: Variable Declaration - Properly declared 'range' variable in scripture parser to prevent implicit global",
        "Fix #5: Dark Mode Initialization - Added 'dark-mode' class to body tag on load to match checked state of dark mode toggle",
        "Fix #6: Gospel Placement Logic - Fixed parentheses bug in eveningGospel conditional and corrected eveningEpistle disappearing issue",
        "Fix #7: Date Picker Timezone - Implemented explicit local date parsing to prevent timezone shifting when selecting dates",
        "Fix #8: Loading Indicators - Added loading states in init() and renderOffice() for better user feedback during async operations",
        "Fix #9: Debug Cleanup - Removed console.log statement for sidebar width from production code",
        "Fix #10: Bible Cache Memory Management - Implemented LRU cache (max 20 books) to prevent unlimited memory growth",
        "Fix #11: Liturgical Calendar Extension - Extended seasonRanges array through December 31, 2030 with accurate movable feast dates",
        "Fix #12: Settings Persistence - Implemented localStorage-based persistence for all user preferences (rite, devotions, optional prayers, etc.)",
        "Fix #13: Error Handling Standardization - Unified error handling in getScriptureText() with consistent format and console logging",
        "Fix #14: Print Styles - Added comprehensive @media print styles for clean, professional paper output"
      ]
    },
    {
      "date": "2026-02-12",
      "version": "1.7.0", 
      "category": "File System Redesign",
      "fixes": [
        "Step 1: Consolidate Marian logic - Render once based on marianPos in index.html",
        "Step 2: Refine Scripture Rendering - Regex strips verse numbers and replaces line breaks",
        "Step 3: Update seasonal JSON keys to 'reading_ot', 'reading_epistle', 'reading_gospel'",
        "Step 4: Add settings radio for Gospel placement ('morning', 'evening', 'both')",
        "Step 5: Add back navigation buttons to Individual Prayers and Daily Office modes",
        "Step 6: Center Individual Prayers content and remove skew/border",
        "Step 7: Ref formatting: Fixed case-sensitivity issues between seasonal JSONs and Bible IDs",
        "Step 8: Duplicated Marian Antiphon appearing multiple times in the render flow fixed",
        "Step 9: Lesson rendering updated for BCP three-lesson structure flexibility",
        "Step 10: Verify all 155 Psalms in psalms.json are pulling correctly",
        "Step 11: Migrate from deprecated propers.json to seasonal JSON files",
        "Step 12: Fix old-testament.json truncation - Restore data after Jeremiah 8",
        "Step 13: Standardize Collect IDs - Link seasonal JSON collect fields to components.json",
        "Step 14: Implement 30-day Psalm cycle - Added range parsing logic",
        "Step 15: Update index.html to load correct saints-<month>.json file based on current month",
        "Step 16: Expansion of Ethiopian Broader Canon (Legal, Historical, Prophetic, NT 8-Books)",
        "Step 17: Transcription of 100 Miracles of Mary and Primary Salutation Cycle (Malke'a)",
        "Step 18: Redesigned file system into specialized subdirectories (bible, bible/ET, bible/NT, bible/OT, saints, season) for better data management",
        "Step 19: Full English Canon Expansion: Integrated Syriac, Armenian, Greek (EO), and Coptic scripture files with tradition suffixes",
        "Step 20: Corrected Psalter numbering: Verified Psalms 151-155 against Syriac Peshitta lectionary; resolved 153/155 duplicate"
      ]
    }
  ],
  "lessons_learned": [
    {
      "lesson": "Consolidation of shared saints/feasts",
      "description": "Consolidate shared saints to 'tradition': 'Universal' to eliminate redundancy."
    },
    {
      "lesson": "Anglican saint selection process",
      "description": "Vetted via BCP/LFF criteria; Explicit Protestant reformers removed unless overridden."
    },
    {
      "lesson": "No simulations",
      "description": "Always use real tool calls for verification. Never assume or guess file contents."
    },
    {
      "lesson": "Lectionary adherence",
      "description": "Strictly use 1979 BCP Daily Office Lectionary (Year One/Two cycle)."
    },
    {
      "lesson": "JSON integrity and No Truncation",
      "description": "Never truncate structure.json. Loss of structural steps or lessons learned blocks breaks project roadmap."
    },
    {
      "lesson": "Lectionary shorthand and choice handling",
      "description": "For BCP shorthand like 'Isaiah 58:1-9A(9B-12)', always use the full reading (58:1-12)."
    },
    {
      "lesson": "Pillar Priority",
      "description": "Ensure the BCP 1979 core functionality is fully operational before integrating broader tradition logic (e.g., Sa'atat)."
    },
    {
      "lesson": "Path Management",
      "description": "Any change to the physical directory structure must be immediately followed by an update to the pathing logic in the application's initialization functions."
    },
    {
      "lesson": "Incremental Testing",
      "description": "When refactoring complex applications, fix issues incrementally with testing between each change rather than applying multiple fixes simultaneously."
    },
    {
      "lesson": "Performance Optimization",
      "description": "Implement resource limits (LRU caches, lazy loading) early to prevent performance degradation as content grows."
    },
    {
      "lesson": "User Experience First",
      "description": "Loading indicators, error handling, and settings persistence significantly improve user satisfaction even when core functionality works."
    },
    {
      "lesson": "Print Media Consideration",
      "description": "For liturgical applications, print output is critical - users often want hard copies for offline prayer."
    }
  ],
  "technical_improvements": {
    "memory_management": "LRU cache limits Bible books to 20 most recently used, preventing memory bloat on mobile devices",
    "state_persistence": "All user preferences saved to localStorage and restored on session start",
    "lazy_loading": "Daily Office data only loads when needed, reducing initial page load time",
    "error_resilience": "Standardized error handling with graceful degradation when scripture unavailable",
    "date_handling": "Timezone-aware date parsing prevents date shifting across different locales",
    "print_optimization": "Clean print styles remove UI chrome and optimize typography for paper"
  },
  "known_limitations": {
    "calendar_range": "Liturgical season dates hardcoded through 2030; will require update for 2031+",
    "browser_storage": "localStorage has ~5-10MB limit; settings and cache stay well under this threshold",
    "offline_capability": "Requires initial online load; subsequent usage works offline once data cached",
    "mobile_optimization": "Responsive design works on mobile but lacks native app features (gestures, notifications)"
  },
  "deployment_notes": {
    "hosting_requirements": "Static hosting sufficient (GitHub Pages, Netlify, Vercel)",
    "dependencies": "None - vanilla JavaScript with no external libraries",
    "browser_compatibility": "Modern browsers (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)",
    "performance": "Lightweight: Initial load ~500KB, subsequent loads use browser cache"
  },
  "last_updated": "2026-02-14"
}