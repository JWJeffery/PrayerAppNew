{
  "project_manifest": {
    "name": "Universal Office (Prayer App New)",
    "version": "2.1.0",
    "description": "A comprehensive digital Daily Office and Psalter designed for Anglicans and those in communion with them. It incorporates elements from Anglican, Catholic, Eastern Orthodox, Oriental Orthodox, and Church of the East monastic and parish prayer services.",
    "theological_vision": "As part of 'the one, holy, catholic, and apostolic Church,' the app aims to help users become more like Jesus through sacraments and prayer, drawing from the Holy Fathers.",
    "current_phase": "Phase 6: BCP Lectionary Alignment & Multi-Tradition Preparation",
    "last_major_update": "2026-02-15"
  },
  "operational_status": "OPERATIONAL WITH PRIORITY CORRECTIONS NEEDED - The application is functional but requires immediate attention to align with BCP 1979 two-year lectionary cycle. Current one-year cycle is a departure from stated BCP compliance goal.",
  "goals": [
    "PRIMARY: Full alignment with BCP 1979 rubrics, lectionary, and liturgical structure with optional enhancements",
    "Offer customizable prayer experiences drawing from multiple Christian traditions to deepen users' spiritual lives",
    "Facilitate immersion in worship, bringing 'heaven to earth' through visual, auditory, and sensory elements",
    "Include a saints section with a curated kalendar based on Lesser Feasts and Fasts and the BCP, reviewed for marks of holiness and intercession",
    "Ensure the app is beautiful and engaging, changing with liturgical seasons to enhance the prayer experience",
    "FUTURE: Enable users to select Catholic, Orthodox, or Church of the East offices as alternative prayer modes",
    "Complete the 'Eight Books' of the Ethiopian New Testament church order",
    "Standardize all unique canonical IDs (e.g., 1MEQ, JUB, ASC_ISA, FETH_NAG, 3CO, 2BA, LAO) for global searchability"
  ],
  "priority_corrections_needed": {
    "critical": [
      {
        "issue": "One-year lectionary cycle vs. BCP 1979 two-year cycle",
        "current_state": "Seasonal JSON files use one-year continuous semi-continuous reading cycle",
        "required_state": "Must implement BCP 1979 Daily Office Lectionary with Year One and Year Two cycles",
        "impact": "This is a departure from BCP, not an enhancement. Must be corrected for full BCP alignment.",
        "action_items": [
          "Research and document BCP 1979 Daily Office Lectionary Year One and Year Two structure",
          "Create lectionary mapping for each day of the year in both cycles",
          "Update seasonal JSON files to include 'year_one' and 'year_two' reading fields",
          "Add year selection toggle to settings panel (auto-detect based on church year or manual selection)",
          "Update renderOffice() function to select appropriate year's readings",
          "Verify alignment with actual BCP 1979 Daily Office Lectionary tables"
        ],
        "priority": "HIGH",
        "estimated_effort": "Large - requires complete lectionary data entry and verification"
      },
      {
        "issue": "Sunday naming convention - Propers vs. Traditional numbering",
        "current_state": "Uses traditional numbering only ('First Sunday after Pentecost')",
        "required_state": "Support both BCP 1979 'Proper X' system AND traditional numbering for user familiarity",
        "impact": "Users need flexibility in how Sundays are named",
        "action_items": [
          "Add 'proper_number' field to seasonal JSON entries for Sundays after Pentecost",
          "Update display to show both: 'Proper 15 / Tenth Sunday after Pentecost'",
          "Add toggle in settings for preferred display format",
          "Ensure bulletins and spoken references accommodate both systems"
        ],
        "priority": "MEDIUM",
        "estimated_effort": "Small - primarily data entry and display logic"
      },
      {
        "issue": "Eastern Orthodox devotional placement in Daily Office",
        "current_state": "Eastern prayers (Trisagion, Theotokion, Jesus Prayer, etc.) accessible but not optimally placed",
        "required_state": "These should be clearly marked as optional additions, perhaps in a separate 'Additional Devotions' section",
        "impact": "Clarity for BCP users; proper integration for ecumenical users",
        "action_items": [
          "Create dedicated 'Additional Devotions' section in UI",
          "Move Eastern Orthodox prayers to optional devotions area",
          "Clearly label these as 'from Eastern/Oriental Orthodox tradition'",
          "Consider creating an 'Ecumenical Devotions' toggle category",
          "Ensure BCP-only users can have a 'pure BCP' experience if desired"
        ],
        "priority": "MEDIUM",
        "estimated_effort": "Medium - requires UI reorganization and clear labeling"
      }
    ],
    "important": [
      {
        "issue": "Future multi-tradition office support architecture",
        "current_state": "Architecture focuses on BCP with added elements",
        "required_state": "Need modular architecture to support completely different office structures (Roman Catholic Liturgy of the Hours, Byzantine Horologion, etc.)",
        "action_items": [
          "Design office-type selection system (BCP Daily Office, Catholic LOH, Orthodox Horologion, Church of the East)",
          "Create separate rubric files for each tradition",
          "Design tradition-specific component libraries",
          "Maintain BCP as default/primary with others as optional modules",
          "Ensure clean separation so BCP users never see non-BCP content unless opted in"
        ],
        "priority": "LOW (Future Phase)",
        "estimated_effort": "Very Large - full architectural redesign"
      }
    ]
  },
  "bcp_compliance_status": {
    "current_compliance": "85%",
    "target_compliance": "100% (with clearly marked enhancements)",
    "compliance_breakdown": {
      "liturgical_calendar": {
        "status": "COMPLIANT",
        "notes": "All seasons, feast days, and liturgical colors match BCP 1979",
        "percentage": 100
      },
      "office_structure": {
        "status": "COMPLIANT",
        "notes": "Morning Prayer, Evening Prayer, Noonday, Compline structures match BCP rubrics",
        "percentage": 95,
        "issues": ["Some optional prayers need better placement/labeling"]
      },
      "lectionary": {
        "status": "NON-COMPLIANT",
        "notes": "Uses one-year cycle instead of BCP 1979 two-year Daily Office Lectionary",
        "percentage": 50,
        "issues": ["Critical: Must implement Year One/Year Two cycles"]
      },
      "collects_and_prayers": {
        "status": "COMPLIANT",
        "notes": "Collects match BCP 1979 with proper seasonal and feast day propers",
        "percentage": 100
      },
      "psalter": {
        "status": "COMPLIANT",
        "notes": "30-day psalm cycle option matches BCP; additional psalms 151-155 are clearly marked enhancements",
        "percentage": 100
      },
      "canticles": {
        "status": "COMPLIANT",
        "notes": "All BCP canticles present (Venite, Jubilate, Te Deum, Benedictus, Magnificat, Nunc Dimittis, etc.)",
        "percentage": 100
      }
    }
  },
  "immersive_features": {
    "visual": "Icons of saints, background colors, and themes that change with liturgical seasons based on seasonal JSON files and liturgicalColor field",
    "auditory": "Light background music or sounds to evoke a sacred atmosphere (pending implementation)",
    "sensory": "Design elements that evoke the atmosphere of traditional worship (e.g., imagery of incense)",
    "ui": "Immersive interface for web and mobile to create a 'heavenly worship' experience"
  },
  "technical_architecture": {
    "frontend": "Vanilla JavaScript with CSS custom properties for theming",
    "data_format": "Modular JSON structures for high-performance client-side rendering",
    "state_management": "In-memory session state with localStorage persistence for user preferences",
    "performance": "LRU cache for Bible text (max 20 books), lazy loading for seasonal data",
    "entry_point": "index.html with consolidated logic"
  },
  "content_status": {
    "psalter": {
      "canonical_psalms": "1-150 (Completed)",
      "historical_psalms": "151-155 (Completed: Syriac Peshitta lectionary alignment verified)",
      "total_entries": 155,
      "source_text": "NRSV / Traditional liturgical translations",
      "status": "Fully verified and integrated into data/bible/OT/psalms.json"
    },
    "ethiopic_pillar": {
      "historical_legal": "Completed: Didaskalia, Fetha Nagast (Full), Nicaea, Josippon (Full)",
      "prophetic_wisdom": "Completed: 1 Enoch, Jubilees, Ascension of Isaiah, Rest of Baruch, Rest of Jeremiah, 1-3 Meqa'abyan",
      "patristic_pillar": "Completed: 1-8 Clement (Ethiopic), Shepherd of Hermas",
      "new_testament_eight_books": "Completed: Sirate Tsion, Tizaz, Gitsiw, Abtilis, I-IV Qalëmentos (Visionary, Rolls, and Statute Recensions)",
      "marian_narrative": "Completed: Tä'amrä Maryam (Miracles of Mary) - 100 Miracles (Volumes I & II Combined)",
      "hymnody": "Completed: Malke'a Mariam, Malke'a Iyasus, Malke'a Guba'e (Full Salutation Cycle Finished)"
    },
    "global_expansion": {
      "syriac_tradition": "Completed: 2 Baruch, 5 Maccabees (Syriac), Letter of Baruch, Odes of Solomon, Psalms 152-155 (Peshitta), History of Zosimus",
      "armenian_tradition": "Completed: 3 Corinthians, Prayer of Apollonius, Armenian Canticles",
      "eastern_orthodox": "Completed: Nine Biblical Odes (Septuagint Basis)",
      "coptic_tradition": "Completed: Four Hoos (Coptic Odes)",
      "western_apocrypha": "Completed: Epistle to the Laodiceans"
    },
    "liturgy": {
      "morning_prayer": "Fully operational with customizable settings (Rite I/II, Priest/Lay, optional prayers) - NEEDS YEAR ONE/TWO LECTIONARY",
      "evening_prayer": "Fully operational with Phos Hilaron and Magnificat - NEEDS YEAR ONE/TWO LECTIONARY",
      "compline": "Fully operational with Nunc Dimittis",
      "noonday_prayer": "Fully operational",
      "customization": "Gospel placement (Morning/Evening/Both), 30-day Psalter option, Great Litany, Suffrages, Creed selection"
    },
    "collects_and_special": {
      "daily_collects": "Completed - collect IDs standardized across seasonal files and linked to components.json",
      "seasonal_antiphons": "Implemented via antiphon field in seasonal JSONs",
      "canticles": "Fully integrated: Magnificat, Nunc Dimittis, Te Deum, Benedictus, Phos Hilaron"
    },
    "saints_kalendar": {
      "status": "Complete for January through December with dynamic monthly loading",
      "implementation": "Automatically loads data/saints/saints-<month>.json based on current date"
    },
    "seasonal_propers": {
      "status": "Complete through liturgical year 2030",
      "coverage": "Advent, Christmas, Epiphany, Lent, Easter, Ordinary Time (subdivided)",
      "lectionary": "CURRENT: One-year semi-continuous cycle (NON-BCP) | TARGET: 1979 BCP Daily Office Lectionary (Year One/Year Two)"
    }
  },
  "roadmap": {
    "immediate_priorities": [
      {
        "phase": "6.1 - BCP Lectionary Compliance",
        "tasks": [
          "Research BCP 1979 Daily Office Lectionary structure and document findings",
          "Acquire or transcribe Year One and Year Two reading tables",
          "Design data structure for dual-year lectionary in seasonal JSONs",
          "Implement year selection logic (manual toggle + automatic calculation based on liturgical year)",
          "Update all seasonal JSON files with Year One and Year Two reading fields",
          "Test year switching functionality",
          "Verify random sampling of dates against printed BCP 1979"
        ],
        "estimated_duration": "2-3 weeks",
        "priority": "CRITICAL"
      },
      {
        "phase": "6.2 - Sunday Naming Enhancement",
        "tasks": [
          "Add 'proper_number' field to Ordinary Time Sundays in seasonal JSONs",
          "Create mapping table between Proper numbers and traditional Sunday names",
          "Update UI to display both naming conventions",
          "Add settings toggle for preferred display format",
          "Test display on various screen sizes"
        ],
        "estimated_duration": "3-5 days",
        "priority": "MEDIUM"
      },
      {
        "phase": "6.3 - Devotional Organization",
        "tasks": [
          "Design 'Additional Devotions' UI section",
          "Move Eastern Orthodox prayers to clearly labeled optional area",
          "Add tradition labels to all non-BCP elements",
          "Create 'BCP Only' mode toggle that hides all enhancements",
          "Test that BCP-only experience is clean and standard"
        ],
        "estimated_duration": "1 week",
        "priority": "MEDIUM"
      }
    ],
    "future_phases": [
      {
        "phase": "7.0 - Multi-Tradition Architecture",
        "description": "Enable full support for Catholic, Orthodox, and Church of the East offices",
        "prerequisites": ["Complete BCP implementation", "Stable architecture"],
        "priority": "LOW"
      },
      {
        "phase": "8.0 - Mobile App Development",
        "description": "Native iOS and Android apps with offline capability and push notifications for prayer times",
        "prerequisites": ["Stable web application"],
        "priority": "LOW"
      }
    ]
  },
  "files_structure": {
    "root": [
      "index.html",
      "package.json"
    ],
    "data_root": [
      "data/README.md",
      "data/components.json",
      "data/rubrics.json",
      "data/structure.json"
    ],
    "bible_library": {
      "NT": [
        "data/bible/NT/*.json (27 canonical + apocryphal books)"
      ],
      "OT": [
        "data/bible/OT/*.json (39 canonical + deuterocanonical + apocryphal books)"
      ],
      "ET": [
        "data/bible/ET/*.json (Ethiopian Orthodox broader canon)"
      ],
      "SY": [
        "data/bible/SY/*.json (Syriac tradition texts)"
      ],
      "AR": [
        "data/bible/AR/*.json (Armenian tradition texts)"
      ],
      "ODES": [
        "data/bible/ODES/*.json (Biblical canticles and odes)"
      ]
    },
    "saints": [
      "data/saints/saints-january.json",
      "data/saints/saints-february.json",
      "data/saints/saints-march.json",
      "data/saints/saints-april.json",
      "data/saints/saints-may.json",
      "data/saints/saints-june.json",
      "data/saints/saints-july.json",
      "data/saints/saints-august.json",
      "data/saints/saints-september.json",
      "data/saints/saints-october.json",
      "data/saints/saints-november.json",
      "data/saints/saints-december.json"
    ],
    "season": [
      "data/season/advent.json",
      "data/season/christmas.json",
      "data/season/epiphany.json",
      "data/season/lent.json",
      "data/season/easter.json",
      "data/season/ordinary1.json",
      "data/season/ordinary2.json",
      "data/season/ordinary3.json"
    ]
  },
  "recent_updates": [
    {
      "date": "2026-02-15",
      "version": "2.1.0",
      "category": "BCP Compliance Review and Roadmap Update",
      "changes": [
        "CRITICAL FINDING: Identified one-year lectionary cycle as departure from BCP 1979 two-year cycle",
        "Updated goals to emphasize PRIMARY goal of full BCP alignment with optional enhancements",
        "Added priority_corrections_needed section with actionable tasks",
        "Created bcp_compliance_status tracking system",
        "Documented need for dual Sunday naming (Propers + Traditional)",
        "Clarified that Eastern Orthodox devotions are enhancements, not replacements",
        "Updated roadmap with immediate priorities focusing on BCP compliance",
        "Established 'BCP-plus' philosophy: 100% BCP compliant with clearly marked optional additions"
      ]
    },
    {
      "date": "2026-02-14",
      "version": "2.0.0",
      "category": "Production Release",
      "fixes": [
        "Fix #1: Bible Reader Mode - Implemented complete navigation system for canonical Bible books with chapter/verse selection",
        "Fix #2: Memory Management - Added LRU cache limiting to 20 most recent Bible books to prevent memory bloat",
        "Fix #3: Lazy Loading - Seasonal data loads on-demand rather than at initialization",
        "Fix #4: Loading Indicators - Added visual feedback during scripture fetching and office rendering",
        "Fix #5: Date Handling - Implemented timezone-aware date parsing to prevent date shifting",
        "Fix #6: Psalm Range Parsing - Fixed support for complex psalm ranges like '110:1-5(6-7)'",
        "Fix #7: Scripture Reference Case Sensitivity - Standardized book ID matching (uppercase)",
        "Fix #8: Proper Seasonal Antiphons - Fixed seasonal antiphon selection logic",
        "Fix #9: Canticle Rendering - Consolidated canticle display logic (Te Deum, Magnificat, etc.)",
        "Fix #10: Gospel Placement Logic - Added flexible positioning (Morning/Evening/Both)",
        "Fix #11: Marian Antiphon Positioning - Implemented before/after/none positioning options",
        "Fix #12: Settings Persistence - Implemented localStorage-based persistence for all user preferences",
        "Fix #13: Error Handling Standardization - Unified error handling with graceful degradation",
        "Fix #14: Print Styles - Added comprehensive @media print styles for clean paper output"
      ]
    },
    {
      "date": "2026-02-12",
      "version": "1.7.0",
      "category": "File System Redesign",
      "fixes": [
        "Consolidated Marian logic",
        "Refined Scripture Rendering with verse number stripping",
        "Updated seasonal JSON keys to standardized format",
        "Added Gospel placement settings",
        "Added navigation buttons to all modes",
        "Fixed reference case-sensitivity issues",
        "Implemented BCP three-lesson structure flexibility",
        "Verified all 155 Psalms pulling correctly",
        "Migrated from deprecated propers.json to seasonal JSON files",
        "Standardized Collect IDs across all files",
        "Implemented 30-day Psalm cycle",
        "Updated dynamic monthly saints loading",
        "Expanded Ethiopian Broader Canon",
        "Transcribed Miracles of Mary and Malke'a cycle",
        "Redesigned file system into specialized subdirectories",
        "Integrated Syriac, Armenian, Greek (EO), and Coptic scripture files",
        "Corrected Psalter numbering (Psalms 151-155)"
      ]
    }
  ],
  "lessons_learned": [
    {
      "lesson": "BCP Compliance is Primary",
      "description": "The stated goal is FULL BCP 1979 alignment with enhancements. Any departure from BCP (like using one-year vs. two-year lectionary) is a bug, not a feature. Must correct immediately.",
      "date_added": "2026-02-15"
    },
    {
      "lesson": "Clear Enhancement Labeling",
      "description": "All non-BCP elements (Eastern prayers, expanded canon, etc.) must be clearly labeled as enhancements and optional. Users should be able to have a 'pure BCP' experience.",
      "date_added": "2026-02-15"
    },
    {
      "lesson": "Dual Naming Systems",
      "description": "Support both modern BCP terminology (Propers) and traditional Anglican terminology (numbered Sundays) as both are in common use.",
      "date_added": "2026-02-15"
    },
    {
      "lesson": "Consolidation of shared saints/feasts",
      "description": "Consolidate shared saints to 'tradition': 'Universal' to eliminate redundancy."
    },
    {
      "lesson": "Anglican saint selection process",
      "description": "Vetted via BCP/LFF criteria; Explicit Protestant reformers removed unless overridden."
    },
    {
      "lesson": "No simulations",
      "description": "Always use real tool calls for verification. Never assume or guess file contents."
    },
    {
      "lesson": "Lectionary adherence",
      "description": "Strictly use 1979 BCP Daily Office Lectionary (Year One/Two cycle). CURRENT STATUS: Not implemented. PRIORITY: Critical."
    },
    {
      "lesson": "JSON integrity and No Truncation",
      "description": "Never truncate structure.json. Loss of structural steps or lessons learned blocks project roadmap."
    },
    {
      "lesson": "Lectionary shorthand and choice handling",
      "description": "For BCP shorthand like 'Isaiah 58:1-9A(9B-12)', always use the full reading (58:1-12)."
    },
    {
      "lesson": "Pillar Priority",
      "description": "Ensure the BCP 1979 core functionality is fully operational before integrating broader tradition logic."
    },
    {
      "lesson": "Path Management",
      "description": "Any change to directory structure must be immediately followed by pathing logic updates."
    },
    {
      "lesson": "Incremental Testing",
      "description": "Fix issues incrementally with testing between changes rather than multiple simultaneous fixes."
    },
    {
      "lesson": "Performance Optimization",
      "description": "Implement resource limits (LRU caches, lazy loading) early to prevent performance degradation."
    },
    {
      "lesson": "User Experience First",
      "description": "Loading indicators, error handling, and settings persistence significantly improve satisfaction."
    },
    {
      "lesson": "Print Media Consideration",
      "description": "For liturgical applications, print output is critical - users want hard copies for offline prayer."
    }
  ],
  "technical_improvements": {
    "memory_management": "LRU cache limits Bible books to 20 most recently used, preventing memory bloat on mobile devices",
    "state_persistence": "All user preferences saved to localStorage and restored on session start",
    "lazy_loading": "Daily Office data only loads when needed, reducing initial page load time",
    "error_resilience": "Standardized error handling with graceful degradation when scripture unavailable",
    "date_handling": "Timezone-aware date parsing prevents date shifting across different locales",
    "print_optimization": "Clean print styles remove UI chrome and optimize typography for paper"
  },
  "known_limitations": {
    "calendar_range": "Liturgical season dates hardcoded through 2030; will require update for 2031+",
    "browser_storage": "localStorage has ~5-10MB limit; settings and cache stay well under this threshold",
    "offline_capability": "Requires initial online load; subsequent usage works offline once data cached",
    "mobile_optimization": "Responsive design works on mobile but lacks native app features (gestures, notifications)",
    "lectionary_compliance": "CRITICAL: Currently uses one-year cycle instead of BCP 1979 two-year cycle. Must be corrected."
  },
  "deployment_notes": {
    "hosting_requirements": "Static hosting sufficient (GitHub Pages, Netlify, Vercel)",
    "dependencies": "None - vanilla JavaScript with no external libraries",
    "browser_compatibility": "Modern browsers (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)",
    "performance": "Lightweight: Initial load ~500KB, subsequent loads use browser cache"
  },
  "last_updated": "2026-02-15"
}